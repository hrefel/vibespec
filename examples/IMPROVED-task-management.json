{
  "title": "Task Management System with Enhanced Type Safety",
  "domain": "fullstack",
  "description": "A complete task management system demonstrating improved frontend-backend synchronization with exact type definitions, API contracts, and data mapping to eliminate sync bugs.",
  "requirements": [
    "Implement user authentication with JWT tokens",
    "Support task creation, viewing, updating, and deletion (CRUD)",
    "Tasks must have: title (string, required, 1-200 chars), description (string, optional), priority (enum: low/medium/high), status (enum: todo/in_progress/completed), due date (datetime, optional)",
    "Users can assign tasks to themselves",
    "Real-time validation on both frontend and backend",
    "Pagination for task lists (default 20 items per page)",
    "Proper error handling with field-level validation errors"
  ],
  "components": [
    "User Authentication Module",
    "Task CRUD System",
    "Task List with Pagination",
    "Task Form with Validation",
    "Task Detail View"
  ],
  "tech_stack": [
    "React with TypeScript",
    "Node.js with Express",
    "PostgreSQL",
    "JWT authentication",
    "React Hook Form + Zod for validation"
  ],
  "entities": [
    {
      "name": "User",
      "description": "User entity for authentication and task assignment",
      "fields": [
        {
          "name": "id",
          "type": "uuid",
          "required": true,
          "unique": true,
          "description": "Unique user identifier"
        },
        {
          "name": "email",
          "type": "string",
          "required": true,
          "unique": true,
          "pattern": "^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$",
          "description": "User email address"
        },
        {
          "name": "passwordHash",
          "type": "string",
          "required": true,
          "description": "Bcrypt hashed password"
        },
        {
          "name": "name",
          "type": "string",
          "required": true,
          "min_length": 2,
          "max_length": 100,
          "description": "User full name"
        },
        {
          "name": "createdAt",
          "type": "datetime",
          "required": true,
          "description": "Account creation timestamp"
        }
      ],
      "indexes": ["id", "email"]
    },
    {
      "name": "Task",
      "description": "Task entity for task management",
      "fields": [
        {
          "name": "id",
          "type": "uuid",
          "required": true,
          "unique": true,
          "description": "Unique task identifier"
        },
        {
          "name": "title",
          "type": "string",
          "required": true,
          "min_length": 1,
          "max_length": 200,
          "description": "Task title"
        },
        {
          "name": "description",
          "type": "string",
          "required": false,
          "max_length": 2000,
          "description": "Task description"
        },
        {
          "name": "priority",
          "type": "enum",
          "enum_values": ["low", "medium", "high"],
          "required": true,
          "default": "medium",
          "description": "Task priority level"
        },
        {
          "name": "status",
          "type": "enum",
          "enum_values": ["todo", "in_progress", "completed"],
          "required": true,
          "default": "todo",
          "description": "Task status"
        },
        {
          "name": "dueDate",
          "type": "datetime",
          "required": false,
          "description": "Task due date"
        },
        {
          "name": "assigneeId",
          "type": "uuid",
          "required": false,
          "description": "ID of user assigned to this task"
        },
        {
          "name": "createdAt",
          "type": "datetime",
          "required": true,
          "description": "Task creation timestamp"
        },
        {
          "name": "updatedAt",
          "type": "datetime",
          "required": true,
          "description": "Last update timestamp"
        }
      ],
      "relationships": [
        {
          "type": "many-to-one",
          "target_entity": "User",
          "foreign_key": "assigneeId",
          "description": "Task belongs to a user (assignee)"
        }
      ],
      "indexes": ["id", "assigneeId", "status", "createdAt"]
    }
  ],
  "api_endpoints": [
    {
      "name": "Create Task",
      "method": "POST",
      "endpoint": "/api/tasks",
      "authentication": "bearer",
      "description": "Create a new task",
      "request": {
        "body": {
          "title": {
            "type": "string",
            "required": true,
            "description": "Task title (1-200 characters)"
          },
          "description": {
            "type": "string",
            "required": false,
            "description": "Task description (max 2000 characters)"
          },
          "priority": {
            "type": "enum",
            "enum_values": ["low", "medium", "high"],
            "required": true,
            "description": "Task priority"
          },
          "status": {
            "type": "enum",
            "enum_values": ["todo", "in_progress", "completed"],
            "required": false,
            "default": "todo",
            "description": "Task status"
          },
          "dueDate": {
            "type": "datetime",
            "required": false,
            "description": "Task due date in ISO 8601 format"
          },
          "assigneeId": {
            "type": "uuid",
            "required": false,
            "description": "User ID to assign task to"
          }
        }
      },
      "responses": [
        {
          "status": 201,
          "description": "Task created successfully",
          "body": {
            "id": "uuid",
            "title": "string",
            "description": "string | null",
            "priority": "low | medium | high",
            "status": "todo | in_progress | completed",
            "dueDate": "string (ISO 8601) | null",
            "assigneeId": "uuid | null",
            "createdAt": "string (ISO 8601)",
            "updatedAt": "string (ISO 8601)"
          }
        },
        {
          "status": 400,
          "description": "Validation error",
          "body": {
            "error": "Validation failed",
            "details": [
              {
                "field": "title",
                "message": "Title is required and must be 1-200 characters"
              }
            ]
          }
        },
        {
          "status": 401,
          "description": "Unauthorized",
          "body": {
            "error": "Authentication required"
          }
        }
      ],
      "validation_rules": [
        {
          "field": "title",
          "rules": ["required", "string", "min_length:1", "max_length:200"]
        },
        {
          "field": "description",
          "rules": ["string", "max_length:2000"]
        },
        {
          "field": "priority",
          "rules": ["required", "in:low,medium,high"]
        },
        {
          "field": "status",
          "rules": ["in:todo,in_progress,completed"]
        },
        {
          "field": "dueDate",
          "rules": ["datetime", "iso8601"]
        },
        {
          "field": "assigneeId",
          "rules": ["uuid", "exists:users.id"]
        }
      ]
    },
    {
      "name": "Get All Tasks",
      "method": "GET",
      "endpoint": "/api/tasks",
      "authentication": "bearer",
      "description": "Retrieve paginated list of tasks",
      "request": {
        "query_params": {
          "page": {
            "type": "number",
            "required": false,
            "default": 1,
            "description": "Page number"
          },
          "limit": {
            "type": "number",
            "required": false,
            "default": 20,
            "description": "Items per page"
          },
          "status": {
            "type": "enum",
            "enum_values": ["todo", "in_progress", "completed"],
            "required": false,
            "description": "Filter by status"
          },
          "priority": {
            "type": "enum",
            "enum_values": ["low", "medium", "high"],
            "required": false,
            "description": "Filter by priority"
          },
          "sort": {
            "type": "string",
            "required": false,
            "default": "createdAt:desc",
            "description": "Sort field and order (e.g., 'dueDate:asc')"
          }
        }
      },
      "responses": [
        {
          "status": 200,
          "description": "Success",
          "body": {
            "data": [
              {
                "id": "uuid",
                "title": "string",
                "description": "string | null",
                "priority": "low | medium | high",
                "status": "todo | in_progress | completed",
                "dueDate": "string | null",
                "assigneeId": "uuid | null",
                "createdAt": "string (ISO 8601)",
                "updatedAt": "string (ISO 8601)"
              }
            ],
            "pagination": {
              "total": "number",
              "page": "number",
              "limit": "number",
              "totalPages": "number"
            }
          }
        },
        {
          "status": 401,
          "description": "Unauthorized",
          "body": {
            "error": "Authentication required"
          }
        }
      ]
    }
  ],
  "data_mapping": {
    "naming_convention": {
      "database": "snake_case",
      "api": "camelCase",
      "frontend": "camelCase"
    },
    "date_handling": {
      "database": "TIMESTAMP WITH TIME ZONE",
      "api_format": "ISO 8601 string (YYYY-MM-DDTHH:mm:ss.sssZ)",
      "frontend_display": "Use date-fns for formatting (e.g., format(new Date(task.dueDate), 'MMM dd, yyyy'))"
    },
    "transformations": [
      {
        "entity": "Task",
        "mappings": {
          "assignee_id": "assigneeId",
          "due_date": "dueDate",
          "created_at": "createdAt",
          "updated_at": "updatedAt"
        }
      },
      {
        "entity": "User",
        "mappings": {
          "password_hash": "passwordHash",
          "created_at": "createdAt"
        }
      }
    ]
  },
  "type_definitions": {
    "frontend": {
      "TaskPriority": "type TaskPriority = 'low' | 'medium' | 'high'",
      "TaskStatus": "type TaskStatus = 'todo' | 'in_progress' | 'completed'",
      "Task": "interface Task { id: string; title: string; description?: string; priority: TaskPriority; status: TaskStatus; dueDate?: string; assigneeId?: string; createdAt: string; updatedAt: string; }",
      "CreateTaskRequest": "interface CreateTaskRequest { title: string; description?: string; priority: TaskPriority; status?: TaskStatus; dueDate?: string; assigneeId?: string; }",
      "UpdateTaskRequest": "interface UpdateTaskRequest { title?: string; description?: string; priority?: TaskPriority; status?: TaskStatus; dueDate?: string; assigneeId?: string; }",
      "TaskListResponse": "interface TaskListResponse { data: Task[]; pagination: { total: number; page: number; limit: number; totalPages: number; }; }",
      "ValidationError": "interface ValidationError { field: string; message: string; }",
      "ErrorResponse": "interface ErrorResponse { error: string; details?: ValidationError[]; }"
    },
    "backend": {
      "schemas": {
        "users_table": {
          "id": "UUID PRIMARY KEY DEFAULT gen_random_uuid()",
          "email": "VARCHAR(255) UNIQUE NOT NULL",
          "password_hash": "VARCHAR(255) NOT NULL",
          "name": "VARCHAR(100) NOT NULL",
          "created_at": "TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()"
        },
        "tasks_table": {
          "id": "UUID PRIMARY KEY DEFAULT gen_random_uuid()",
          "title": "VARCHAR(200) NOT NULL",
          "description": "TEXT",
          "priority": "VARCHAR(20) NOT NULL DEFAULT 'medium' CHECK (priority IN ('low', 'medium', 'high'))",
          "status": "VARCHAR(20) NOT NULL DEFAULT 'todo' CHECK (status IN ('todo', 'in_progress', 'completed'))",
          "due_date": "TIMESTAMP WITH TIME ZONE",
          "assignee_id": "UUID REFERENCES users(id) ON DELETE SET NULL",
          "created_at": "TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()",
          "updated_at": "TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()"
        }
      },
      "indexes": {
        "tasks": ["idx_tasks_assignee_id ON tasks(assignee_id)", "idx_tasks_status ON tasks(status)", "idx_tasks_created_at ON tasks(created_at)"]
      }
    }
  },
  "acceptance_criteria": [
    "Users can create tasks with all fields validated correctly",
    "Frontend and backend use identical TypeScript types for Task",
    "API returns tasks in camelCase, database stores in snake_case",
    "All dates are in ISO 8601 format in API responses",
    "Validation errors include field-level details",
    "Task list pagination works correctly (default 20 items)",
    "Frontend form validation matches backend validation exactly",
    "No type mismatches between frontend expectations and backend responses"
  ],
  "ai_guidance": {
    "type_safety": "Generate TypeScript interfaces from the entity definitions. Use the provided Task, TaskPriority, TaskStatus types on both frontend and backend. Backend should have DTOs that transform database models to match frontend types exactly.",
    "naming_conventions": "Database uses snake_case (due_date, assignee_id). API layer transforms to camelCase (dueDate, assigneeId) before sending to frontend. Use a consistent field name mapper in API middleware.",
    "date_handling": "Backend: Serialize PostgreSQL TIMESTAMP to ISO 8601 strings in API responses. Frontend: Parse ISO strings to Date objects for display. Use date-fns for formatting. Never send Unix timestamps.",
    "validation": "Implement IDENTICAL validation on frontend (React Hook Form + Zod) and backend (Express middleware). Use the validation_rules defined in API contracts. Frontend shows errors immediately, backend provides security validation.",
    "error_handling": "Backend MUST return { error: string, details: [{ field: string, message: string }] } for validation errors. Frontend should parse this format and display field-level errors next to form inputs.",
    "security": "Verify JWT token on all endpoints. Validate user can only access/modify their own tasks. Sanitize all string inputs. Use parameterized queries for SQL.",
    "performance": "Add database indexes on tasks(assignee_id), tasks(status), tasks(created_at). Implement pagination with limit/offset. Cache user sessions.",
    "testing": "Write tests to verify: 1) Frontend types match backend responses exactly, 2) Validation works identically on both sides, 3) Date serialization works correctly, 4) Field name transformations are correct."
  },
  "metadata": {
    "spec_version": "1.0.0",
    "generated_by": "vibespec-cli v6.1.1",
    "generated_at": "2025-11-03T10:00:00.000Z"
  }
}
